# Halal Product Finder AU

This repository contains an MVP web application for finding halal products in Australia. The app allows users to scan barcodes or search for products by name, view basic product data sourced from the OpenFoodFacts API, and see an initial halal verdict generated by a simple rules engine. Future iterations will add crowd contributions, moderation workflows and richer halal logic.

## Features

* **Scan Barcodes** – The `/scan` page opens the device camera (if permitted) and uses the ZXing library to decode barcodes. When a valid EAN/UPC is detected, the app navigates to the corresponding product page.
* **Search Products** – The home page contains a search bar that accepts product names or barcodes. Searching navigates directly to the product details page for the entered string.
* **Product Details** – The dynamic route `/product/[barcode]` fetches product information from the OpenFoodFacts API via an internal API route (`/api/off/[barcode]`). It displays the name, brand, image and ingredients along with a stub halal verdict.
* **Halal Verdict** – A simple rules engine in `lib/halalRules.ts` inspects the ingredients text for obvious non‑halal components (e.g. pork, gelatin, alcohol) and returns `Not Halal` or `Unknown`. This logic is intentionally naive for the MVP and should be expanded in later versions.
* **Admin Placeholder** – An `/admin` page is included as a placeholder for moderator tools; authentication and full moderation flows are not implemented yet.

## Project Structure

```
halal-product-finder/
├── app/
│   ├── api/off/[barcode]/route.ts   – API route proxying OpenFoodFacts
│   ├── admin/page.tsx               – Placeholder admin dashboard
│   ├── product/[barcode]/page.tsx   – Product detail page
│   ├── scan/page.tsx               – Barcode scanning page
│   ├── page.tsx                    – Home page with search & scan CTA
│   ├── layout.tsx                  – Root layout and global styling
│   └── globals.css                 – Tailwind CSS import
├── lib/
│   └── halalRules.ts               – Stub halal rules engine
├── supabase/
│   ├── schema.sql                  – Database schema for Supabase
│   └── seed.ts                     – Example seed script
├── tailwind.config.js              – Tailwind configuration
├── postcss.config.js               – PostCSS configuration
├── next.config.js                  – Next.js configuration (App Router enabled)
├── tsconfig.json                   – TypeScript configuration
├── package.json                    – Project dependencies and scripts
└── .env.example                    – Environment variable template
```

## Local Development

1. **Install dependencies** – After cloning the repo, run:

   ```bash
   cd halal-product-finder
   npm install
   ```

2. **Configure environment variables** – Copy `.env.example` to `.env.local` and fill in your Supabase project URL and anon/public key. If you plan to run the seed script, also set `SUPABASE_SERVICE_ROLE_KEY`.

3. **Run the development server** – Start the Next.js dev server:

   ```bash
   npm run dev
   ```

   Navigate to `http://localhost:3000` in your browser. The scanner page requires camera access.

4. **Seed the database (optional)** – To load sample data into Supabase, install `ts-node` (`npm i -D ts-node`) and run:

   ```bash
   SUPABASE_URL=... SUPABASE_SERVICE_ROLE_KEY=... npx ts-node supabase/seed.ts
   ```

## Deployment

### Supabase Setup

1. Sign up for a free [Supabase](https://supabase.com) account and create a new project.
2. In the Supabase dashboard, go to the SQL Editor and run the contents of `supabase/schema.sql` to create the required tables.
3. Obtain your project URL and anon key from **Settings → API**. Create a service role key (optional, used for seeding and admin functions).
4. Under **Authentication**, enable **Email** or **Magic Link** sign‑in if you plan to require user accounts (not yet used in this MVP).

### Vercel Deployment

1. Commit this repository to GitHub.
2. In your Vercel dashboard, select **New Project** and import the repo. When prompted, set the following environment variables in Vercel:

   - `SUPABASE_URL` – your Supabase project URL
   - `SUPABASE_ANON_KEY` – your Supabase anon/public key
   - `NEXT_PUBLIC_SUPABASE_URL` – same as `SUPABASE_URL`
   - `NEXT_PUBLIC_SUPABASE_ANON_KEY` – same as `SUPABASE_ANON_KEY`
   - `NEXT_PUBLIC_APP_URL` – the base URL of your Vercel deployment (e.g. `https://halal-app.vercel.app`)

2. Deploy the app. Vercel will build and host the Next.js project on its free tier. For PWA functionality, you may later integrate [`next-pwa`](https://github.com/shadowwalker/next-pwa) when network access is available.

### Domain & HTTPS

Vercel automatically provisions HTTPS. If you wish to use a custom domain, follow Vercel’s documentation to add your DNS records.

## Notes & Roadmap

This MVP focuses on scanning, search and display of basic halal verdicts. Critical missing features include authentication, crowd sourcing of data, moderation tools, offline caching, and a robust halal rules engine. These will be addressed in subsequent iterations.

Because this repository avoids using paid services, the barcoding and search rely entirely on free APIs and browser capabilities. For production use, review the OpenFoodFacts API terms and consider hosting your own dataset to ensure reliability.

## License

This project is licensed under the MIT License. See `LICENSE` for details.